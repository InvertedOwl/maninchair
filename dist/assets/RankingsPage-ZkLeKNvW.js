import{_ as q,r as p,o as J,a as I,c as L,w as o,u as l,b as s,I as x,d as K,e as Q,f as G,g as n,h as R,i as f,j as D,n as Z,k as c,l as X,m as H,p as B,F as O,q as Y,s as ee,t as ae,v as U,x as te,y as h,z as le,A as oe,B as N,C as se,D as ne}from"./index-BjtHITeT.js";const ue=g=>(se("data-v-7852492f"),g=g(),ne(),g),ie={class:"selects-container"},re=ue(()=>f("h1",null," Rankings ",-1)),ce={class:"center"},ve={class:"ion-padding",slot:"content"},de={__name:"RankingsPage",setup(g){const V=p({}),t=p([]),P=p(""),T=p(""),A=p(""),y=p(""),z=[["division","Division"],["rank","Rank"],["wp","WP"],["ap","AP"],["sp","SP"],["wins","Win"],["losses","Losses"],["ties","Ties"],["winPct","Win Percentage"],["numMatches","Number of matches"],["totalPoints","Total Points"],["avgPoints","Average Points"],["highScore","High Score"],["totalElevation","Total Elevation"],["totalAuto","Total Auto"],["totalAutoWp","Total Auto WP"],["totalGoalTriballs","Total Goal Triballs"],["totalZoneTriballs","Total Zone Triballs"]];function C(i){let a=i+"=",m=decodeURIComponent(document.cookie).split(";");for(let r=0;r<m.length;r++){let d=m[r];for(;d.charAt(0)==" ";)d=d.substring(1);if(d.indexOf(a)==0)return d.substring(a.length,d.length)}return""}J(async()=>{const a=await(await fetch("/data/rankings?event="+C("event"))).json(),m=await(await fetch("/data/matches?event="+C("event"))).json();t.value=a,V.value=m,t.value=t.value.sort((r,d)=>r.rank-d.rank),t.value.forEach(r=>{let d=0,S=0,E=0,M=0,b=0;V.value.forEach(F=>{const v=JSON.parse(F.data),w=v.info.alliances[0].teams,W=v.info.alliances[1].teams;if(w[0].number==r.teamnum||w[1].number==r.teamnum&&v.info.state=="SCORED")try{console.log(),d+=v.scoreData.alliances[0].scoreTypes.find(u=>u.name==="auto").val,S+=v.scoreData.alliances[0].scoreTypes.find(u=>u.name==="auto_wp").val,E+=v.scoreData.alliances[0].scoreTypes.find(u=>u.name==="goal_triballs").val,M+=v.scoreData.alliances[0].scoreTypes.find(u=>u.name==="zone_triballs").val,w[0].number==r.teamnum&&(b+=v.scoreData.alliances[0].scoreTypes.find(u=>u.name==="elevation_tier_1").val),w[1].number==r.teamnum&&(b+=v.scoreData.alliances[0].scoreTypes.find(u=>u.name==="elevation_tier_2").val)}catch(u){}if(W[0].number==r.teamnum||W[1].number==r.teamnum&&v.info.state=="SCORED")try{console.log(),d+=v.scoreData.alliances[1].scoreTypes.find(u=>u.name==="auto").val,S+=v.scoreData.alliances[1].scoreTypes.find(u=>u.name==="auto_wp").val,E+=v.scoreData.alliances[1].scoreTypes.find(u=>u.name==="goal_triballs").val,M+=v.scoreData.alliances[1].scoreTypes.find(u=>u.name==="zone_triballs").val,W[0].number==r.teamnum&&(b+=v.scoreData.alliances[1].scoreTypes.find(u=>u.name==="elevation_tier_1").val),W[1].number==r.teamnum&&(b+=v.scoreData.alliances[1].scoreTypes.find(u=>u.name==="elevation_tier_2").val)}catch(u){}}),r.totalElevation=b,r.totalAuto=d,r.totalAutoWp=S,r.totalGoalTriballs=E,r.totalZoneTriballs=M})});let _=!0;function $(){_=!0,k()}function j(){_=!1,k()}function k(){console.log(T.value),console.log(P.value),console.log(A.value);const i=A.value=="HighToLow"?1:-1;if(_)switch(console.log("Sort stats"),P.value){case"WinLoss":t.value=t.value.sort((a,e)=>(e.wins-e.losses-(a.wins-a.losses))*i);break;case"WP":t.value=t.value.sort((a,e)=>(e.wp-a.wp)*i);break;case"AP":t.value=t.value.sort((a,e)=>(e.ap-a.ap)*i);break;case"SP":t.value=t.value.sort((a,e)=>(e.sp-a.sp)*i);break;case"HighPoints":t.value=t.value.sort((a,e)=>(e.highScore-a.highScore)*i);break;case"WinPoints":t.value=t.value.sort((a,e)=>(e.wp-a.wp)*i);break;default:t.value=t.value.sort((a,e)=>(a.rank-e.rank)*i)}else if(y.value=="Total")switch(T.value){case"ZoneTriball":t.value=t.value.sort((a,e)=>(e.totalZoneTriballs-a.totalZoneTriballs)*i);break;case"GoalTriball":t.value=t.value.sort((a,e)=>(e.totalGoalTriballs-a.totalGoalTriballs)*i);break;case"AutoWin":t.value=t.value.sort((a,e)=>(e.totalAuto-a.totalAuto)*i);break;case"AutoWP":t.value=t.value.sort((a,e)=>(e.totalAutoWp-a.totalAutoWp)*i);break;case"Elevation":t.value=t.value.sort((a,e)=>(e.totalElevation-a.totalElevation)*i);break;case"Points":t.value=t.value.sort((a,e)=>(e.totalPoints-a.totalPoints)*i);break}else switch(T.value){case"ZoneTriball":t.value=t.value.sort((a,e)=>(e.totalZoneTriballs/e.numMathces-a.totalZoneTriballs/a.numMathces)*i);break;case"GoalTriball":t.value=t.value.sort((a,e)=>(e.totalGoalTriballs/e.numMathces-a.totalGoalTriballs/a.numMathces)*i);break;case"AutoWin":t.value=t.value.sort((a,e)=>(e.totalAuto/e.numMathces-a.totalAuto/a.numMathces)*i);break;case"AutoWP":t.value=t.value.sort((a,e)=>(e.totalAutoWp/e.numMathces-a.totalAutoWp/a.numMathces)*i);break;case"Elevation":t.value=t.value.sort((a,e)=>(e.totalElevation/e.numMathces-a.totalElevation/a.numMathces)*i);break;case"Points":t.value=t.value.sort((a,e)=>(e.avgPoints-a.avgPoints)*i);break}}return(i,a)=>(I(),L(l(ee),null,{default:o(()=>[s(l(R),{translucent:!0},{default:o(()=>[s(l(x),null,{default:o(()=>[s(l(K),{slot:"start"},{default:o(()=>[s(l(Q),{color:"primary"})]),_:1}),s(l(G),null,{default:o(()=>[n("Rankings")]),_:1})]),_:1})]),_:1}),s(l(Y),{fullscreen:!0},{default:o(()=>[s(l(R),{collapse:"condense"},{default:o(()=>[s(l(x),null,{default:o(()=>[s(l(G),{size:"large"},{default:o(()=>[n("Rankings")]),_:1})]),_:1})]),_:1}),f("div",ie,[s(l(D),{label:"Stats Sort By",class:Z({"italic-text":l(_)}),interface:"popover",placeholder:"Default",onIonChange:a[0]||(a[0]=e=>$()),modelValue:P.value,"onUpdate:modelValue":a[1]||(a[1]=e=>P.value=e)},{default:o(()=>[s(l(c),{value:"Default"},{default:o(()=>[n("Default")]),_:1}),s(l(c),{value:"Rank"},{default:o(()=>[n("Rank")]),_:1}),s(l(c),{value:"WinLoss"},{default:o(()=>[n("Win Loss Ratio")]),_:1}),s(l(c),{value:"WP"},{default:o(()=>[n("Total Win Points")]),_:1}),s(l(c),{value:"AP"},{default:o(()=>[n("Auto Points")]),_:1}),s(l(c),{value:"SP"},{default:o(()=>[n("Strength Points")]),_:1}),s(l(c),{value:"HighPoints"},{default:o(()=>[n("High Score Points")]),_:1}),s(l(c),{value:"WinPoints"},{default:o(()=>[n("Win Points")]),_:1})]),_:1},8,["class","modelValue"]),s(l(D),{label:"Scores Sort By",class:Z({"italic-text":!l(_)}),interface:"popover",placeholder:"Default",onIonChange:a[2]||(a[2]=e=>j()),modelValue:T.value,"onUpdate:modelValue":a[3]||(a[3]=e=>T.value=e)},{default:o(()=>[s(l(c),{value:"Default"},{default:o(()=>[n("Default")]),_:1}),s(l(c),{value:"ZoneTriball"},{default:o(()=>[n("Zone Triballs")]),_:1}),s(l(c),{value:"GoalTriball"},{default:o(()=>[n("Goal Triballs")]),_:1}),s(l(c),{value:"AutoWin"},{default:o(()=>[n("Auto Wins")]),_:1}),s(l(c),{value:"AutoWP"},{default:o(()=>[n("Auto Win Points")]),_:1}),s(l(c),{value:"Elevation"},{default:o(()=>[n("Elevation")]),_:1}),s(l(c),{value:"Points"},{default:o(()=>[n("Points")]),_:1})]),_:1},8,["class","modelValue"]),s(l(D),{label:"Direction",interface:"popover",placeholder:"Unset",value:"LowToHigh",onIonChange:a[4]||(a[4]=e=>k()),modelValue:A.value,"onUpdate:modelValue":a[5]||(a[5]=e=>A.value=e)},{default:o(()=>[s(l(c),{value:"HighToLow"},{default:o(()=>[n("High To Low")]),_:1}),s(l(c),{value:"LowToHigh"},{default:o(()=>[n("Low To High")]),_:1})]),_:1},8,["modelValue"]),s(l(D),{label:"Type",interface:"popover",placeholder:"Unset",value:"Total",onIonChange:a[6]||(a[6]=e=>k()),modelValue:y.value,"onUpdate:modelValue":a[7]||(a[7]=e=>y.value=e)},{default:o(()=>[s(l(c),{value:"Total"},{default:o(()=>[n("Total")]),_:1}),s(l(c),{value:"Average"},{default:o(()=>[n("Average")]),_:1})]),_:1},8,["modelValue"])]),re,f("div",ce,[s(l(X),null,{default:o(()=>[f("div",null,[(I(!0),H(O,null,B(t.value,e=>(I(),L(l(ae),{value:t.value.indexOf(e)},{default:o(()=>[s(l(U),{slot:"header",color:"light"},{default:o(()=>[s(l(te),{style:{display:"flex","flex-direction":"row"}},{default:o(()=>[f("h2",null,h(t.value.indexOf(e)+1),1),f("div",null,[f("div",null,[n(h(e.teamnum)+" ",1),s(l(le),null,{default:o(()=>[n(h(e.division),1)]),_:2},1024)]),f("div",null," Division Rank: "+h(e.rank),1)])]),_:2},1024)]),_:2},1024),f("div",ve,[f("div",null,[s(l(oe),{class:"grid-container"},{default:o(()=>[(I(),H(O,null,B(z,m=>s(l(U),{class:"grid-item"},{default:o(()=>[n(h(m[1])+" "+h(e[m[0]]),1)]),_:2},1024)),64)),s(l(N),{href:"teams?team="+e.teamnum},{default:o(()=>[n("Team Analysis")]),_:2},1032,["href"]),s(l(N),{href:"matchups?team="+e.teamnum},{default:o(()=>[n("Team Matchups")]),_:2},1032,["href"])]),_:2},1024)])])]),_:2},1032,["value"]))),256))])]),_:1})])]),_:1})]),_:1}))}},me=q(de,[["__scopeId","data-v-7852492f"]]);export{me as default};
