import{_ as J,r as p,o as K,a as W,c as x,w as o,u as l,b as s,I as G,d as Q,e as X,f as R,g as n,h as Z,i as f,j as D,n as H,k as c,l as Y,m as B,p as O,F as U,q as ee,s as ae,t as te,v as N,x as le,y as h,z as oe,A as se,B as z,C as ne,D as ue}from"./index-LYtTyueL.js";const ie=g=>(ne("data-v-4f9be879"),g=g(),ue(),g),re={class:"selects-container"},ce=ie(()=>f("h1",null," Rankings ",-1)),ve={class:"center"},de={class:"ion-padding",slot:"content"},fe={__name:"RankingsPage",setup(g){const V=p({}),t=p([]),P=p(""),T=p(""),A=p(""),y=p(""),$=[["division","Division"],["rank","Rank"],["wp","WP"],["ap","AP"],["sp","SP"],["wins","Win"],["losses","Losses"],["ties","Ties"],["winPct","Win Percentage"],["numMatches","Number of matches"],["totalPoints","Total Points"],["avgPoints","Average Points"],["highScore","High Score"],["totalElevation","Total Elevation"],["totalAuto","Total Auto"],["totalAutoWp","Total Auto WP"],["totalGoalTriballs","Total Goal Triballs"],["totalZoneTriballs","Total Zone Triballs"]];function C(i){let a=i+"=",m=decodeURIComponent(document.cookie).split(";");for(let r=0;r<m.length;r++){let d=m[r];for(;d.charAt(0)==" ";)d=d.substring(1);if(d.indexOf(a)==0)return d.substring(a.length,d.length)}return""}K(async()=>{L(),setInterval(L,5e3)});async function L(){const a=await(await fetch("/data/rankings?event="+C("event"))).json(),m=await(await fetch("/data/matches?event="+C("event"))).json();t.value=a,V.value=m,t.value=t.value.sort((r,d)=>r.rank-d.rank),t.value.forEach(r=>{let d=0,S=0,E=0,M=0,b=0;V.value.forEach(q=>{const v=JSON.parse(q.data),w=v.info.alliances[0].teams,I=v.info.alliances[1].teams;if(w[0].number==r.teamnum||w[1].number==r.teamnum&&v.info.state=="SCORED")try{console.log(),d+=v.scoreData.alliances[0].scoreTypes.find(u=>u.name==="auto").val,S+=v.scoreData.alliances[0].scoreTypes.find(u=>u.name==="auto_wp").val,E+=v.scoreData.alliances[0].scoreTypes.find(u=>u.name==="goal_triballs").val,M+=v.scoreData.alliances[0].scoreTypes.find(u=>u.name==="zone_triballs").val,w[0].number==r.teamnum&&(b+=v.scoreData.alliances[0].scoreTypes.find(u=>u.name==="elevation_tier_1").val),w[1].number==r.teamnum&&(b+=v.scoreData.alliances[0].scoreTypes.find(u=>u.name==="elevation_tier_2").val)}catch(u){}if(I[0].number==r.teamnum||I[1].number==r.teamnum&&v.info.state=="SCORED")try{console.log(),d+=v.scoreData.alliances[1].scoreTypes.find(u=>u.name==="auto").val,S+=v.scoreData.alliances[1].scoreTypes.find(u=>u.name==="auto_wp").val,E+=v.scoreData.alliances[1].scoreTypes.find(u=>u.name==="goal_triballs").val,M+=v.scoreData.alliances[1].scoreTypes.find(u=>u.name==="zone_triballs").val,I[0].number==r.teamnum&&(b+=v.scoreData.alliances[1].scoreTypes.find(u=>u.name==="elevation_tier_1").val),I[1].number==r.teamnum&&(b+=v.scoreData.alliances[1].scoreTypes.find(u=>u.name==="elevation_tier_2").val)}catch(u){}}),r.totalElevation=b,r.totalAuto=d,r.totalAutoWp=S,r.totalGoalTriballs=E,r.totalZoneTriballs=M})}let _=!0;function j(){_=!0,k()}function F(){_=!1,k()}function k(){console.log(T.value),console.log(P.value),console.log(A.value);const i=A.value=="HighToLow"?1:-1;if(_)switch(console.log("Sort stats"),P.value){case"WinLoss":t.value=t.value.sort((a,e)=>(e.wins-e.losses-(a.wins-a.losses))*i);break;case"WP":t.value=t.value.sort((a,e)=>(e.wp-a.wp)*i);break;case"AP":t.value=t.value.sort((a,e)=>(e.ap-a.ap)*i);break;case"SP":t.value=t.value.sort((a,e)=>(e.sp-a.sp)*i);break;case"HighPoints":t.value=t.value.sort((a,e)=>(e.highScore-a.highScore)*i);break;case"WinPoints":t.value=t.value.sort((a,e)=>(e.wp-a.wp)*i);break;default:t.value=t.value.sort((a,e)=>(a.rank-e.rank)*i)}else if(y.value=="Total")switch(T.value){case"ZoneTriball":t.value=t.value.sort((a,e)=>(e.totalZoneTriballs-a.totalZoneTriballs)*i);break;case"GoalTriball":t.value=t.value.sort((a,e)=>(e.totalGoalTriballs-a.totalGoalTriballs)*i);break;case"AutoWin":t.value=t.value.sort((a,e)=>(e.totalAuto-a.totalAuto)*i);break;case"AutoWP":t.value=t.value.sort((a,e)=>(e.totalAutoWp-a.totalAutoWp)*i);break;case"Elevation":t.value=t.value.sort((a,e)=>(e.totalElevation-a.totalElevation)*i);break;case"Points":t.value=t.value.sort((a,e)=>(e.totalPoints-a.totalPoints)*i);break}else switch(T.value){case"ZoneTriball":t.value=t.value.sort((a,e)=>(e.totalZoneTriballs/e.numMathces-a.totalZoneTriballs/a.numMathces)*i);break;case"GoalTriball":t.value=t.value.sort((a,e)=>(e.totalGoalTriballs/e.numMathces-a.totalGoalTriballs/a.numMathces)*i);break;case"AutoWin":t.value=t.value.sort((a,e)=>(e.totalAuto/e.numMathces-a.totalAuto/a.numMathces)*i);break;case"AutoWP":t.value=t.value.sort((a,e)=>(e.totalAutoWp/e.numMathces-a.totalAutoWp/a.numMathces)*i);break;case"Elevation":t.value=t.value.sort((a,e)=>(e.totalElevation/e.numMathces-a.totalElevation/a.numMathces)*i);break;case"Points":t.value=t.value.sort((a,e)=>(e.avgPoints-a.avgPoints)*i);break}}return(i,a)=>(W(),x(l(ae),null,{default:o(()=>[s(l(Z),{translucent:!0},{default:o(()=>[s(l(G),null,{default:o(()=>[s(l(Q),{slot:"start"},{default:o(()=>[s(l(X),{color:"primary"})]),_:1}),s(l(R),null,{default:o(()=>[n("Rankings")]),_:1})]),_:1})]),_:1}),s(l(ee),{fullscreen:!0},{default:o(()=>[s(l(Z),{collapse:"condense"},{default:o(()=>[s(l(G),null,{default:o(()=>[s(l(R),{size:"large"},{default:o(()=>[n("Rankings")]),_:1})]),_:1})]),_:1}),f("div",re,[s(l(D),{label:"Stats Sort By",class:H({"italic-text":l(_)}),interface:"popover",placeholder:"Default",onIonChange:a[0]||(a[0]=e=>j()),modelValue:P.value,"onUpdate:modelValue":a[1]||(a[1]=e=>P.value=e)},{default:o(()=>[s(l(c),{value:"Default"},{default:o(()=>[n("Default")]),_:1}),s(l(c),{value:"Rank"},{default:o(()=>[n("Rank")]),_:1}),s(l(c),{value:"WinLoss"},{default:o(()=>[n("Win Loss Ratio")]),_:1}),s(l(c),{value:"WP"},{default:o(()=>[n("Total Win Points")]),_:1}),s(l(c),{value:"AP"},{default:o(()=>[n("Auto Points")]),_:1}),s(l(c),{value:"SP"},{default:o(()=>[n("Strength Points")]),_:1}),s(l(c),{value:"HighPoints"},{default:o(()=>[n("High Score Points")]),_:1}),s(l(c),{value:"WinPoints"},{default:o(()=>[n("Win Points")]),_:1})]),_:1},8,["class","modelValue"]),s(l(D),{label:"Scores Sort By",class:H({"italic-text":!l(_)}),interface:"popover",placeholder:"Default",onIonChange:a[2]||(a[2]=e=>F()),modelValue:T.value,"onUpdate:modelValue":a[3]||(a[3]=e=>T.value=e)},{default:o(()=>[s(l(c),{value:"Default"},{default:o(()=>[n("Default")]),_:1}),s(l(c),{value:"ZoneTriball"},{default:o(()=>[n("Zone Triballs")]),_:1}),s(l(c),{value:"GoalTriball"},{default:o(()=>[n("Goal Triballs")]),_:1}),s(l(c),{value:"AutoWin"},{default:o(()=>[n("Auto Wins")]),_:1}),s(l(c),{value:"AutoWP"},{default:o(()=>[n("Auto Win Points")]),_:1}),s(l(c),{value:"Elevation"},{default:o(()=>[n("Elevation")]),_:1}),s(l(c),{value:"Points"},{default:o(()=>[n("Points")]),_:1})]),_:1},8,["class","modelValue"]),s(l(D),{label:"Direction",interface:"popover",placeholder:"Unset",value:"LowToHigh",onIonChange:a[4]||(a[4]=e=>k()),modelValue:A.value,"onUpdate:modelValue":a[5]||(a[5]=e=>A.value=e)},{default:o(()=>[s(l(c),{value:"HighToLow"},{default:o(()=>[n("High To Low")]),_:1}),s(l(c),{value:"LowToHigh"},{default:o(()=>[n("Low To High")]),_:1})]),_:1},8,["modelValue"]),s(l(D),{label:"Type",interface:"popover",placeholder:"Unset",value:"Total",onIonChange:a[6]||(a[6]=e=>k()),modelValue:y.value,"onUpdate:modelValue":a[7]||(a[7]=e=>y.value=e)},{default:o(()=>[s(l(c),{value:"Total"},{default:o(()=>[n("Total")]),_:1}),s(l(c),{value:"Average"},{default:o(()=>[n("Average")]),_:1})]),_:1},8,["modelValue"])]),ce,f("div",ve,[s(l(Y),null,{default:o(()=>[f("div",null,[(W(!0),B(U,null,O(t.value,e=>(W(),x(l(te),{value:t.value.indexOf(e)},{default:o(()=>[s(l(N),{slot:"header",color:"light"},{default:o(()=>[s(l(le),{style:{display:"flex","flex-direction":"row"}},{default:o(()=>[f("h2",null,h(t.value.indexOf(e)+1),1),f("div",null,[f("div",null,[n(h(e.teamnum)+" ",1),s(l(oe),null,{default:o(()=>[n(h(e.division),1)]),_:2},1024)]),f("div",null," Division Rank: "+h(e.rank),1)])]),_:2},1024)]),_:2},1024),f("div",de,[f("div",null,[s(l(se),{class:"grid-container"},{default:o(()=>[(W(),B(U,null,O($,m=>s(l(N),{class:"grid-item"},{default:o(()=>[n(h(m[1])+" "+h(e[m[0]]),1)]),_:2},1024)),64)),s(l(z),{href:"teams?team="+e.teamnum},{default:o(()=>[n("Team Analysis")]),_:2},1032,["href"]),s(l(z),{href:"matchups?team="+e.teamnum},{default:o(()=>[n("Team Matchups")]),_:2},1032,["href"])]),_:2},1024)])])]),_:2},1032,["value"]))),256))])]),_:1})])]),_:1})]),_:1}))}},pe=J(fe,[["__scopeId","data-v-4f9be879"]]);export{pe as default};
